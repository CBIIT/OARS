@using TheradexPortal.Data.Models;
@using TheradexPortal.Data.ViewModels;
<Div Class="nci-secondary-nav">
<Bar Mode="BarMode.VerticalInline"
    CollapseMode="BarCollapseMode.Small"
    ThemeContrast="ThemeContrast.Light"
    @bind-Visible=IsVisible
    Background="Background.Light">
    <BarMenu>
        <BarStart>
            <BarItem>
                <BarLink @onclick="ToggleNavbar">
                    <BarIcon IconName="IconName.ArrowRight" />
                </BarLink>
            </BarItem>
            @if(Actions.Count > 0)
            {
                <Divider Class="my-0" />
            }
            @foreach(var action in Actions)
            {
                <BarItem>
                    @if(action.To != null){
                        <BarLink To="@action.To">
                            <BarIcon IconName="action.IconName" />
                            @action.Label
                        </BarLink>
                    }
                    else
                    {
                        <BarLink @onclick="() => HandleActionClick(action)">
                            <BarIcon IconName="action.IconName" />
                            @action.Label
                        </BarLink>
                    }
                </BarItem>
            }
            </BarStart>
    </BarMenu>
</Bar>
</Div>

@code {
    [Parameter] public List<SecondaryNavAction> Actions { get; set; } = new List<SecondaryNavAction>();
    [Parameter] public List<Report> Reports { get; set; } = new List<Report>();

    private bool IsVisible = false;

    protected void ToggleNavbar()
    {
        IsVisible = !IsVisible;
    }

    protected void HandleActionClick(SecondaryNavAction action)
    {
        if(action.OnClick != null)
        {
            action.OnClick.Invoke();
        }
    }
}
